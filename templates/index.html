<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NLP e-commerce</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script>
        // 當用戶按下搜尋按鈕時發送搜尋請求
        function searchProducts() {
            let keyword = document.getElementById("searchInput").value;
            // 加入調試訊息，看看是否能提取關鍵字
            console.log("搜尋關鍵字:", keyword);
            if (keyword) {
                fetch(`/search?keyword=${keyword}`)
                    .then(response => response.json())
                    .then(data => {
                        // 顯示搜尋結果
                        let resultDiv = document.getElementById("result");
                        resultDiv.innerHTML = "";

                        // 只顯示前四樣商品
                        let productToDisplay = data.products.slice(0, 4);

                        productToDisplay.forEach(product => {
                            let productElement = document.createElement("div");
                            productElement.classList.add("product"); // 添加 CSS class

                            productElement.innerHTML = `
                                <h3>${product.name}</h3>
                                <img src="${product.image}" alt="${product.name}">
                                <p>價格: ${product.price}</p>
                            `;
                            resultDiv.appendChild(productElement);
                        });
                    })
                    .catch(error => {
                        console.error('錯誤:', error);
                    });
            } else {
                alert('請輸入搜尋關鍵字!');
            }
        }
    </script>
</head>
<body>
    <div class="grid-container">
        <div class="grid-item left-top">
            <h1>Momo 商品搜尋</h1>
            <input type="text" id="searchInput" placeholder="輸入商品名稱">
            <button onclick="searchProducts()">搜尋</button>
        </div>
        <div class="grid-item left-bottom">
            <h2>情感分析結果</h2>
        </div>
        <div class="grid-item right">
            <h2 class="right-title">momo熱門商品</h2>
            <div id="result"></div> 
        </div>
    </div>   
</body>
</html>